<!--
Pomodoro App (single-file)
Features:
- Work/Short Break/Long Break timers
- Start / Pause / Reset
- Adjustable durations (minutes)
- Auto-switch sessions and long-break every 4 work sessions
- LocalStorage persistence for settings and last state
- Desktop Notifications (HTTPS required)
- Simple progress ring and responsive design
- Ready to deploy as a static site (Vercel, Netlify, GitHub Pages...)

To deploy to Vercel:
1. Create a git repo with this file as index.html
2. Push to GitHub/GitLab/Bitbucket
3. Import project on Vercel (New Project -> Import Git Repo) and deploy as a static site

(See chat message for step-by-step deploy commands.)
-->

<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Pomodoro — Simple Timer</title>
  <meta name="description" content="Simple Pomodoro timer with customizable durations and notifications">
  <style>
    :root{
      --bg:#0f1724; /* deep */
      --card:#0b1220;
      --accent:#ff6b6b;
      --muted:#9aa4b2;
      --glass: rgba(255,255,255,0.03);
      --glass-2: rgba(255,255,255,0.025);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;display:grid;place-items:center;gap:1rem;background:linear-gradient(180deg,var(--bg),#071127);color:#e6eef6;padding:24px;
    }
    .wrap{width:100%;max-width:920px}
    header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
    header h1{font-size:1.25rem;margin:0}
    .card{
      background:linear-gradient(180deg,var(--card), rgba(10,14,20,0.6));border-radius:14px;padding:20px;box-shadow:0 6px 30px rgba(2,6,23,0.6);
      display:grid;grid-template-columns:360px 1fr;gap:22px;align-items:center
    }
    @media (max-width:820px){.card{grid-template-columns:1fr;}}

    /* Left: Timer */
    .timer-panel{display:flex;flex-direction:column;align-items:center;gap:14px}
    .ring{width:240px;height:240px;display:grid;place-items:center;border-radius:50%;background:conic-gradient(var(--accent) 0deg, rgba(255,255,255,0.02) 0deg);box-shadow:inset 0 -6px 24px rgba(0,0,0,0.6)}
    .time{font-size:48px;font-weight:700;letter-spacing:1px}
    .label{font-size:14px;color:var(--muted)}
    .controls{display:flex;gap:10px}
    button.btn{background:linear-gradient(180deg,var(--accent),#ff4b4b);border:none;color:white;padding:8px 14px;border-radius:10px;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}

    /* Right: Settings */
    .settings{padding:14px;background:var(--glass);border-radius:12px}
    .row{display:flex;gap:8px;align-items:center;margin-bottom:12px}
    .row label{flex:1;color:var(--muted);font-size:14px}
    .row input[type=number]{width:88px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .small{font-size:12px;color:var(--muted)}
    .sessions{display:flex;gap:8px;flex-wrap:wrap}
    .chip{padding:8px 10px;border-radius:999px;background:var(--glass-2);cursor:pointer}
    .chip.active{background:linear-gradient(90deg,var(--accent),#ff9b9b);color:#06101a}

    footer{margin-top:14px;display:flex;justify-content:space-between;align-items:center;color:var(--muted);font-size:13px}

    /* subtle animations */
    .pulse{animation:pulse 1.6s infinite}
    @keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}

    /* small helpers */
    .flex{display:flex;gap:8px}
    .muted{color:var(--muted)}
    .link{color:var(--accent);text-decoration:underline;cursor:pointer}
  </style>
</head>
<body>
  <main class="wrap">
    <header>
      <h1>Pomodoro • Focus timer</h1>
      <div class="muted">Created by Alfarisy, Rantizi, and Hamud</div>
    </header>

    <section class="card">
      <div class="timer-panel">
        <div id="ring" class="ring pulse" aria-hidden="true">
          <div style="text-align:center">
            <div id="label" class="label">Work</div>
            <div id="time" class="time">25:00</div>
            <div class="small muted" id="sessionCount">Sessions: 0</div>
          </div>
        </div>

        <div class="controls">
          <button id="start" class="btn">Start</button>
          <button id="pause" class="ghost">Pause</button>
          <button id="reset" class="ghost">Reset</button>
        </div>

        <div class="small muted">Tip: Allow notifications for desktop alerts.</div>
      </div>

      <aside class="settings">
        <h3 style="margin-top:0">Settings</h3>

        <div class="row">
          <label for="work">Work (minutes)</label>
          <input id="work" type="number" min="1" max="180" value="25">
        </div>

        <div class="row">
          <label for="short">Short break (minutes)</label>
          <input id="short" type="number" min="1" max="60" value="5">
        </div>

        <div class="row">
          <label for="long">Long break (minutes)</label>
          <input id="long" type="number" min="1" max="60" value="15">
        </div>

        <div class="row">
          <label for="auto">Auto-switch sessions</label>
          <input id="auto" type="checkbox" checked>
        </div>

        <div class="row">
          <label>Quick presets</label>
          <div class="sessions">
            <div data-work="25" data-short="5" data-long="15" class="chip active">Default</div>
            <div data-work="50" data-short="10" data-long="20" class="chip">Deep Focus</div>
            <div data-work="15" data-short="3" data-long="10" class="chip">Quick</div>
          </div>
        </div>

        <div class="row">
          <label for="notify">Notifications</label>
          <button id="requestPermission" class="ghost">Request</button>
        </div>

        <div style="margin-top:10px;font-size:13px;color:var(--muted)">Saved locally — your timer remembers durations and last mode.</div>
      </aside>
    </section>

    <footer>
      <div>Made with love</div>
      
    </footer>
  </main>

  <script>
    // --- state and helpers ---
    const $ = sel => document.querySelector(sel)
    const $all = sel => document.querySelectorAll(sel)

    const timeEl = $('#time')
    const labelEl = $('#label')
    const startBtn = $('#start')
    const pauseBtn = $('#pause')
    const resetBtn = $('#reset')
    const ring = $('#ring')
    const sessionCountEl = $('#sessionCount')

    const inputs = {work: $('#work'), short: $('#short'), long: $('#long'), auto: $('#auto')}
    const presetChips = $all('.chip')

    const STORAGE_KEY = 'pomodoro-state-v1'

    // default config
    const defaultConfig = {work:25, short:5, long:15, auto:true}

    // persistent state
    let config = {...defaultConfig}
    let mode = 'work' // 'work' | 'short' | 'long'
    let running = false
    let remaining = config.work * 60
    let timer = null
    let sessions = 0 // completed work sessions

    // load
    function load(){
      try{
        const raw = localStorage.getItem(STORAGE_KEY)
        if(raw){
          const parsed = JSON.parse(raw)
          config = {...config, ...(parsed.config||{})}
          mode = parsed.mode || mode
          remaining = typeof parsed.remaining === 'number' ? parsed.remaining : config.work*60
          running = false
          sessions = parsed.sessions || 0
        }
      }catch(e){console.warn('load error', e)}
      // update inputs
      inputs.work.value = config.work
      inputs.short.value = config.short
      inputs.long.value = config.long
      inputs.auto.checked = config.auto
      updateUI()
    }

    function save(){
      const toSave = {config, mode, remaining, sessions}
      try{localStorage.setItem(STORAGE_KEY, JSON.stringify(toSave))}catch(e){console.warn('save failed', e)}
    }

    // UI updates
    function formatTime(s){
      const mm = Math.floor(s/60).toString().padStart(2,'0')
      const ss = Math.floor(s%60).toString().padStart(2,'0')
      return `${mm}:${ss}`
    }

    function setMode(m){
      mode = m
      labelEl.textContent = m === 'work' ? 'Work' : m === 'short' ? 'Short Break' : 'Long Break'
      remaining = (m === 'work' ? config.work : m === 'short' ? config.short : config.long) * 60
      updateUI()
      save()
    }

    function updateUI(){
      timeEl.textContent = formatTime(remaining)
      sessionCountEl.textContent = `Sessions: ${sessions}`
      // progress ring (conic gradient)
      const total = (mode === 'work' ? config.work : mode === 'short' ? config.short : config.long) * 60
      const percent = ((total - remaining) / total) * 360
      ring.style.background = `conic-gradient(var(--accent) ${percent}deg, rgba(255,255,255,0.02) ${percent}deg)`
      // highlight preset if matches
      presetChips.forEach(chip=>{
        const w = Number(chip.dataset.work)
        const s = Number(chip.dataset.short)
        const l = Number(chip.dataset.long)
        chip.classList.toggle('active', w===config.work && s===config.short && l===config.long)
      })
      // enable/disable buttons
      startBtn.disabled = running
      pauseBtn.disabled = !running
    }

    // timer functions
    function tick(){
      if(remaining>0){
        remaining--
        updateUI()
      } else {
        // finished
        onFinish()
      }
    }

    function start(){
      if(running) return
      running = true
      timer = setInterval(tick,1000)
      updateUI()
      save()
    }

    function pause(){
      running = false
      clearInterval(timer)
      timer = null
      updateUI()
      save()
    }

    function reset(){
      pause()
      remaining = (mode === 'work' ? config.work : mode === 'short' ? config.short : config.long) * 60
      updateUI()
      save()
    }

    function onFinish(){
      pause()
      playBeep()
      notify(`${labelEl.textContent} finished!`)

      if(mode==='work'){
        sessions++
      }

      // auto-switch behavior
      if(config.auto){
        if(mode==='work'){
          // every 4 work sessions -> long break
          if(sessions % 4 === 0){
            setMode('long')
          } else {
            setMode('short')
          }
        } else {
          setMode('work')
        }
        start()
      } else {
        // leave it at finished state
        // set remaining to 0 so UI shows 00:00
        remaining = 0
        updateUI()
      }
      save()
    }

    // audio
    function playBeep(){
      try{
        const ctx = new (window.AudioContext || window.webkitAudioContext)()
        const o = ctx.createOscillator()
        const g = ctx.createGain()
        o.type = 'sine'
        o.frequency.value = 880
        g.gain.value = 0.02
        o.connect(g)
        g.connect(ctx.destination)
        o.start()
        setTimeout(()=>{o.stop();ctx.close()},700)
      }catch(e){console.warn('audio err',e)}
    }

    // notifications
    async function notify(message){
      if(!('Notification' in window)) return
      if(Notification.permission === 'granted'){
        new Notification('Pomodoro', {body: message, silent: false})
      }else if(Notification.permission !== 'denied'){
        try{
          const perm = await Notification.requestPermission()
          if(perm === 'granted') new Notification('Pomodoro', {body: message})
        }catch(e){console.warn(e)}
      }
    }

    $('#requestPermission').addEventListener('click', async ()=>{
      if(!('Notification' in window)) return alert('Notifications not supported')
      const p = await Notification.requestPermission()
      alert('Permission: ' + p)
    })

    // wire buttons
    startBtn.addEventListener('click', start)
    pauseBtn.addEventListener('click', pause)
    resetBtn.addEventListener('click', reset)

    // inputs change
    inputs.work.addEventListener('change', ()=>{config.work = clamp(Number(inputs.work.value)||25,1,180); save(); reset(); updateUI()})
    inputs.short.addEventListener('change', ()=>{config.short = clamp(Number(inputs.short.value)||5,1,60); save(); reset(); updateUI()})
    inputs.long.addEventListener('change', ()=>{config.long = clamp(Number(inputs.long.value)||15,1,60); save(); reset(); updateUI()})
    inputs.auto.addEventListener('change', ()=>{config.auto = inputs.auto.checked; save()})

    // preset chips
    presetChips.forEach(chip=>{
      chip.addEventListener('click', ()=>{
        config.work = Number(chip.dataset.work)
        config.short = Number(chip.dataset.short)
        config.long = Number(chip.dataset.long)
        inputs.work.value = config.work
        inputs.short.value = config.short
        inputs.long.value = config.long
        save(); setMode('work'); updateUI()
      })
    })

    function clamp(v, a, b){return Math.max(a, Math.min(b, v))}

    // deploy guide link
    $('#deployGuide').addEventListener('click', ()=>{
      alert('Deploy steps:\n1) git init -> add index.html -> commit -> push to GitHub\n2) Sign in to Vercel and import the repository -> Deploy (set root if needed)\nOr run: vercel --prod from your project folder if you use Vercel CLI')
    })

    // init
    load()

    // ensure we set initial mode to whatever loaded state said
    if(mode) {
      if(!remaining) remaining = (mode === 'work' ? config.work : mode === 'short' ? config.short : config.long) * 60
      updateUI()

      // auto-resume if timer was active before reload
      if(localStorage.getItem('pomodoro-running') === 'true') {
        start()
      }
    }

    // whenever we start/pause, remember running state
    function start(){
      if(running) return
      running = true
      localStorage.setItem('pomodoro-running', 'true')
      timer = setInterval(tick,1000)
      updateUI()
      save()
    }

    function pause(){
      running = false
      localStorage.setItem('pomodoro-running', 'false')
      clearInterval(timer)
      timer = null
      updateUI()
      save()
    }


    // save periodically (in case)
    setInterval(save, 5000)
  </script>
</body>
</html>
